<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board">
    <!--게시판 글쓰기-->
    <insert id="board_insert">
        insert into BOARD (back_end_list_no, back_end_list_img, back_end_list_title, back_end_list_cont, back_end_list_id, back_end_list_date,step,ref)values (back_end_list_no_seq.nextval,#{back_end_list_img},#{back_end_list_title},#{back_end_list_cont},#{back_end_list_id},sysdate,0,back_end_list_no_seq.nextval)
    </insert>

    <!--내용 보기-->
    <select id="select_my_board" resultType="board">
        select * from BOARD where BACK_END_LIST_ID=#{back_end_list_id} and BACK_END_LIST_TITLE=#{back_end_list_title} and BACK_END_LIST_NO=#{back_end_list_no}
    </select>

    <!--답변 저장-->
    <insert id="insert_reply">
        insert into BOARD(BACK_END_LIST_NO, BACK_END_LIST_IMG, BACK_END_LIST_TITLE, BACK_END_LIST_CONT, BACK_END_LIST_ID, BACK_END_LIST_DATE, STEP, REF) values(back_end_list_no_seq.nextval,'답변글','답변글',#{back_end_list_cont},#{back_end_list_id},sysdate,#{step}+1,#{back_end_list_no})
    </insert>
    
    <select id="get_reply" resultType="board">
        select * from (select * from BOARD where step&gt;0 and ref=#{back_end_list_no}) order by BACK_END_LIST_DATE desc
    </select>
    
    
</mapper>