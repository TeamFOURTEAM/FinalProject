<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC 
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="QandA"> <!-- mapper네임스페이스명 설정 -->
	
	<!-- QandA 게시판 저장 -->
	<insert id="QandA_in">
		insert into q_board (q_no,q_name,q_title,q_pwd,q_cont,q_ref,
		q_step,q_level,q_date) values(q_no_seq.nextval,#{q_name},#{q_title},
		#{q_pwd},#{q_cont},q_no_seq.nextval,0,0,sysdate)
	</insert>
	
	<!-- 검색 전후 레코드 개수 -->
	<select id="QandA_count" parameterType="QandA" resultType="int">
		select count(q_no) from q_board
		<where>
			<if test="find_field == ''"></if>
			<if test="find_field =='q_title'">
				q_title like #{find_name}
			</if>
			
			<if test="find_field == 'QandA_cont'">
				q_cont like #{find_name}
			</if>
		</where>
	</select>
	
	<!-- 검색 전후 게시판 목록 -->
	<select id="QandA_list" resultType="QandA">
		select * from(
		select rowNum rNum,q_no,q_name,q_title,q_hit,q_ref,
		q_step,q_level,q_date from(
		select * from q_board
		<where>
			<if test="find_field == ''"></if>
				<if test="find_field == 'q_title'">
					q_title like #{find_name}
				</if>
				<if test="find_field == 'q_cont'">
					q_cont like #{find_name}
				</if>
		</where>
		order by q_ref desc,q_level asc))
		where rNum &gt; = #{startrow} and rNum &lt; = #{endrow}
	</select>
	
	
</mapper>