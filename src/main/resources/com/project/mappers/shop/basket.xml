<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Basket"> <!-- mapper네임스페이스명 설정 -->
	<!-- 장바구니에 상품 추가 -->
	<insert id="basket_add">
		insert into shopBasket (basket_no,basket_id,product_no,basket_count) 
		values(basket_no_seq.nextval,#{basket_id},#{product_no},
		#{basket_count})
	</insert>
	
	<!-- 장바구니 동일 상품 확인 -->
	<select id="basket_count" resultType="int">
		select count(*) from shopBasket where basket_id=#{basket_id} 
		and product_no=#{product_no}
	</select>
	
	<!-- 장바구니 동일 상품 갱신 -->
	<update id="basketSame_update">
		update shopBasket
		set basket_count=#{basket_count}
		where basket_id=#{basket_id} and product_no=#{product_no}
	</update>
	
	<!-- 아이디에 따른 장바구니 목록 -->
	<select id="basket_list" resultType="basket">
		select * from shopBasket where basket_id=#{basket_id} and validity=1 
		order by basket_no desc
	</select>
	
</mapper>